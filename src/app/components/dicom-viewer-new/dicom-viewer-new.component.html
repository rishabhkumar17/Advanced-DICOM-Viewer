<div class="dicom-viewer-container" style="position: relative; width: 100%; height: 100%;" (window:resize)="onWindowResize()">
  <!-- Loading Overlay -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner">
        <div class="spinner-ring"></div>
        <div class="spinner-ring"></div>
        <div class="spinner-ring"></div>
      </div>
      <div class="loading-text">
        <h3>Loading DICOM Image</h3>
        <p>{{ loadingMessage }}</p>
        <div class="loading-progress" *ngIf="loadingProgress > 0">
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="loadingProgress"></div>
          </div>
          <span class="progress-text">{{ loadingProgress.toFixed(0) }}%</span>
        </div>
      </div>
    </div>
  </div>

  <div #vp class="cs3d-vp" tabindex="0" style="width: 100%; height: 100%; outline: none;"></div>
  <app-annotation-overlay
    [width]="viewportWidth"
    [height]="viewportHeight"
    [activeTool]="activeTool"
    (annotationCreated)="onAnnotationCreated($event)"
    (annotationUpdated)="onAnnotationUpdated($event)"
    (annotationSelected)="onAnnotationSelected($event)">
  </app-annotation-overlay>
</div>